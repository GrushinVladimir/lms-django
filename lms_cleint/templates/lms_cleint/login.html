{% extends 'lms_cleint/base.html' %}
{% block content %}
{% load static %}

<div class="row h-100" style="--bs-gutter-x: 1.8rem;">
 <div class="col-xl-4 ps-5 pe-5">
<svg width="100" height="100" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
  <!-- Дополнительный круг (темнее, на заднем плане) -->
    <circle cx="165" cy="80" r="22" fill="#5a9c8f" opacity="0.9"/>
    <circle cx="147" cy="50" r="22" fill="#5a9c8f" opacity="0.9"/>
    <circle cx="117" cy="34" r="22" fill="#5a9c8f" opacity="0.9"/>
  <!-- Основной круг с тенью -->
  <circle cx="90" cy="110" r="90" fill="#76bdad" filter="url(#shadow)"/>
  
  <!-- Тень (фильтр) -->
  <defs>
    <filter id="shadow" x="-10%" y="-10%" width="120%" height="120%">
      <feDropShadow dx="3" dy="3" stdDeviation="5" flood-opacity="0.2"/>
    </filter>
  </defs>
  <!-- Буква G -->
  <path d="M100 40a60 60 0 1 1 0 120 60 60 0 0 1 0-120zm0 20a40 40 0 1 0 0 80 40 40 0 0 0 0-80z" 
        fill="white" stroke="#fff" stroke-width="2"/>
  <path d="M140 100a40 40 0 0 0-40-40v20a20 20 0 0 1 20 20h20z" 
        fill="white" stroke="#fff" stroke-width="2"/>
</svg>
<h3 style="text-align: center;">{{ greeting }}, рады вас видеть!</h3>

<p style="text-align: center;">Пожалуйста, войдите, чтобы получить доступ к системе управления обучением.</p>

   <form method="post">
    {% csrf_token %}
    {% if form.non_field_errors %}
        <div class="error-message">
            {% for error in form.non_field_errors %}
                <p>{{ error }}</p>
            {% endfor %}
        </div>
    {% endif %}
    
    <div class="form-group">
        <label for="{{ form.username.id_for_label }}">Логин:</label>
        {{ form.username }}
        {% if form.username.errors %}
            <div class="error-message">
                {% for error in form.username.errors %}
                    <p>{{ error }}</p>
                {% endfor %}
            </div>
        {% endif %}
    </div>
    
<div class="form-group">
    <label for="{{ form.password.id_for_label }}">Пароль:</label>
    <div class="password-input-container">
        {{ form.password }}
        <button type="button" class="btn-password-toggle" onclick="togglePasswordVisibility(this)">
            <i class="eye-icon">+</i>
        </button>
    </div>
    {% if form.password.errors %}
        <div class="error-message">
            {% for error in form.password.errors %}
                <p>{{ error }}</p>
            {% endfor %}
        </div>
    {% endif %}
</div>

    <!-- Дополнительные ссылки -->
    <div class="auth-links">
        <a href="#">Забыли пароль?</a>
        {% if 'register' in request.path %}
            <a href="{% url 'login' %}">Войти</a>
        {% else %}
        {% endif %}
        
    </div>
     <button type="submit" class="submit-button">Войти</button>
</form>
 </div>   
<div class="col-xl-8 w-bg">

</div>
<style>
       .password-input-container {
        position: relative;
        display: flex;
        align-items: center;
    }
    
    .btn-password-toggle {
        position: absolute;
        right: 10px;
        background: none;
        border: none;
        cursor: pointer;
        padding: 0;
    }
    
    /* Стиль для поля ввода с кнопкой */
    #{{ form.password.id_for_label }} {
        padding-right: 35px; /* Оставляем место для кнопки */
        width: 100%;
    }
     .btn-password-toggle {
        background: none;
        border: none;
        cursor: pointer;
        padding: 0;
        margin-left: 5px;
    }
    
    .eye-icon {
        font-style: normal;
    }
    
    /* Дополнительные стили для красоты */
    .form-group label {
        display: flex;
        align-items: center;
    }
    svg{
            margin: auto;
    display: block;
    margin-bottom: 3rem;
    margin-top: 2rem;
    }
    @media (max-width: 1200px){
         .w-bg {
display: none;
         }
        
    }
    .w-bg {
        background-image: url("{% static 'images/1543.jpg' %}");

        min-height: 92vh;  /* Используем viewport height */
        height: 100%;
    }
    .submit-button{
        transition: .4s;
        background: #76bdad;
        border: none;
        padding: .6rem 1.7rem;
        border-radius: 10px;
        color: #ffffff;
        font-weight: 600;
        -webkit-text-shadow: 1px 1px 1px rgba(23, 22, 22, 0.29);
        -moz-text-shadow: 1px 1px 1px rgba(23, 22, 22, 0.29);
        text-shadow: 1px 1px 1px rgba(23, 22, 22, 0.29);
    }
     .submit-button:hover, .submit-button:focus, .submit-button:active{
        background: #639388;
     }
    .auth-container {
        max-width: 400px;
        margin: 2rem auto;
        padding: 2rem;
        background: #ffffff;
        border-radius: 12px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    }

    .auth-header {
        text-align: center;
        margin-bottom: 2rem;
    }

    .auth-header h2 {
        color: #2c3e50;
        font-size: 1.8rem;
        margin-bottom: 0.5rem;
    }

    .auth-header p {
        color: #7f8c8d;
        font-size: 1rem;
    }

    .auth-form {
        display: flex;
        flex-direction: column;
    }

   .auth-links {
    padding-bottom: 1rem;    
    }

    .form-label {
        display: block;
        margin-bottom: 0.5rem;
        color: #2c3e50;
        font-weight: 500;
    }

    input[type="text"],
    input[type="password"] {
        width: 100%;
        padding: 12px 16px;
        border: 1px solid #ddd;
        border-radius: 8px;
        font-size: 1rem;
        transition: border-color 0.3s;
    }

    input[type="text"]:focus,
    input[type="password"]:focus {
        border-color: #3498db;
        outline: none;
        box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
    }

    .auth-button {
        background-color: #3498db;
        color: white;
        border: none;
        padding: 12px;
        border-radius: 8px;
        font-size: 1rem;
        font-weight: 500;
        cursor: pointer;
        transition: background-color 0.3s;
        margin-top: 0.5rem;
    }

    .auth-button:hover {
        background-color: #2980b9;
    }

    .auth-footer {
        display: flex;
        justify-content: center;
        align-items: center;
        margin-top: 1.5rem;
        gap: 0.5rem;
    }

    .auth-link {
        color: #3498db;
        text-decoration: none;
        font-size: 0.9rem;
        transition: color 0.2s;
    }

    .auth-link:hover {
        color: #2980b9;
        text-decoration: underline;
    }

    .auth-separator {
        color: #bdc3c7;
    }

    .auth-error,
    .field-error {
        color: #e74c3c;
        background-color: rgba(231, 76, 60, 0.1);
        padding: 0.75rem;
        border-radius: 8px;
        margin-bottom: 1rem;
        font-size: 0.9rem;
    }

    .field-error {
        margin-top: 0.5rem;
    }
</style>
<script>
    function togglePasswordVisibility(button) {
        const passwordField = document.getElementById('{{ form.password.id_for_label }}');
        const eyeIcon = button.querySelector('.eye-icon');
        
        if (passwordField.type === 'password') {
            passwordField.type = 'text';
            eyeIcon.textContent = '-';
        } else {
            passwordField.type = 'password';
            eyeIcon.textContent = '+';
        }
    }
</script>
{% endblock %}